(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[45],{54190:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{S:function(){return FTCard}});var _Users_noclue_ps_Desktop_Programavimas_Workspaces_marketplace_node_modules_next_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(83789),_Users_noclue_ps_Desktop_Programavimas_Workspaces_marketplace_node_modules_next_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(30266),_Users_noclue_ps_Desktop_Programavimas_Workspaces_marketplace_node_modules_next_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(80318),_Users_noclue_ps_Desktop_Programavimas_Workspaces_marketplace_node_modules_next_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(809),_Users_noclue_ps_Desktop_Programavimas_Workspaces_marketplace_node_modules_next_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_Users_noclue_ps_Desktop_Programavimas_Workspaces_marketplace_node_modules_next_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__),react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(67294),axios__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(9669),axios__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(axios__WEBPACK_IMPORTED_MODULE_2__),_utils__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(43196),react_icons_fa__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__(89583),recoil__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(2804),_atoms__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(63569),next_router__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(11163),next_export_i18n__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(37039),_Modals_FTBuy__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(13449),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(85893),FTCard=function FTCard(_ref){var ft=_ref.ft,set=ft.set,script=ft.script,_useState=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([]),colors=_useState[0],setColors=_useState[1],_useState2=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(!1),buy=_useState2[0],setBuy=_useState2[1],_useState3=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)("=="),randomUID=_useState3[0],setRandomUID=_useState3[1],_useRecoilState=(0,recoil__WEBPACK_IMPORTED_MODULE_4__.FV)(_atoms__WEBPACK_IMPORTED_MODULE_5__.D2),_useRecoilState2=(0,_Users_noclue_ps_Desktop_Programavimas_Workspaces_marketplace_node_modules_next_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_10__.Z)(_useRecoilState,2),_braodcasts=_useRecoilState2[0],setBroadcasts=_useRecoilState2[1],user=(0,recoil__WEBPACK_IMPORTED_MODULE_4__.sJ)(_atoms__WEBPACK_IMPORTED_MODULE_5__.KL),apiLink=(0,recoil__WEBPACK_IMPORTED_MODULE_4__.sJ)(_atoms__WEBPACK_IMPORTED_MODULE_5__.H3),prefix=(0,recoil__WEBPACK_IMPORTED_MODULE_4__.sJ)(_atoms__WEBPACK_IMPORTED_MODULE_5__.uo),router=(0,next_router__WEBPACK_IMPORTED_MODULE_6__.useRouter)(),_useTranslation=(0,next_export_i18n__WEBPACK_IMPORTED_MODULE_7__.$G)(),t=_useTranslation.t,id="_"+Math.random().toString(36).substr(2,9),randomUIDGen=function(_){var e=Math.round(Math.random()*(_.max-(_.min||0))),t=(0,_utils__WEBPACK_IMPORTED_MODULE_3__.s3)(e);setRandomUID(t)};(0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)((function(){axios__WEBPACK_IMPORTED_MODULE_2___default().get("".concat(apiLink,"api/set/").concat(set)).then((function(_){var e=_.data;setInterval((function(){randomUIDGen(e.set)}),1e3)}))}),[]);var handleTakeBack=function(){var _=(0,_Users_noclue_ps_Desktop_Programavimas_Workspaces_marketplace_node_modules_next_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_11__.Z)(_Users_noclue_ps_Desktop_Programavimas_Workspaces_marketplace_node_modules_next_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default().mark((function _(){var e;return _Users_noclue_ps_Desktop_Programavimas_Workspaces_marketplace_node_modules_next_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default().wrap((function(_){for(;;)switch(_.prev=_.next){case 0:return _.next=2,(0,_utils__WEBPACK_IMPORTED_MODULE_3__.pU)({set:ft.set,uid:ft.uid,kind:"ft"},user.name,prefix);case 2:(e=_.sent)&&e.success&&setBroadcasts((function(_){return[].concat((0,_Users_noclue_ps_Desktop_Programavimas_Workspaces_marketplace_node_modules_next_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_12__.Z)(_),[e])}));case 4:case"end":return _.stop()}}),_)})));return function(){return _.apply(this,arguments)}}();return(0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)((function(){axios__WEBPACK_IMPORTED_MODULE_2___default().get("https://ipfs.io/ipfs/".concat(script,"?").concat(randomUID)).then((function(_ref4){var data=_ref4.data,code="(//".concat(data,'\n)("').concat(randomUID,'")'),SVG=eval(code);document.getElementById("image-".concat(set,"-").concat(id))&&(document.getElementById("image-".concat(set,"-").concat(id)).innerHTML=SVG.HTML)}))}),[randomUID]),(0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)((function(){axios__WEBPACK_IMPORTED_MODULE_2___default().get("https://ipfs.io/ipfs/".concat(ft.script,"?").concat(randomUID)).then((function(_ref5){var data=_ref5.data,code="(//".concat(data,'\n)("').concat(ft.uid,'")'),SVG=eval(code);setColors([SVG.set.Color1,SVG.set.Color2])}))}),[]),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsxs)("div",{className:"border shadow-xl h-auto border-transparent bg-gray-700 rounded-xl  text-white flex flex-col",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)("h1",{className:"cursor-pointer text-center w-full rounded-t-xl font-black py-2 text-xl",style:{background:"linear-gradient(to bottom,  ".concat(colors[0]," 0%,").concat(colors[1]," 100%)")},onClick:function(){return router.push("/set/".concat(set))},children:set}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)("div",{className:"py-5",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsxs)("div",{className:"relative",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)("div",{className:"z-20 bg-gray-700 absolute top-0 w-full h-full bg-opacity-70 flex justify-center items-center",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(react_icons_fa__WEBPACK_IMPORTED_MODULE_13__.g_g,{size:60,color:"#fff"})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)("div",{id:"image-".concat(set,"-").concat(id),className:"w-1/2 mx-auto"})]})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsxs)("div",{className:"px-5 py-4 w-full flex flex-col justify-between items-center",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsxs)("div",{className:"flex gap-1",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsxs)("h1",{children:[t("by"),": "]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)("h1",{className:"hover:text-gray-300 cursor-pointer",onClick:function(){return router.push("/@".concat(ft.by))},children:ft.by})]}),ft.qty&&1!==ft.qty&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsxs)("h1",{children:[t("availible"),": ",ft.qty]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsxs)("h1",{children:[t("price"),":"," ",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsxs)("strong",{children:[parseFloat((+ft.pricenai.amount/Math.pow(10,ft.pricenai.precision)).toString()).toFixed(ft.pricenai.precision)," ",ft.pricenai.token]})]}),ft.by!==(null===user||void 0===user?void 0:user.name)?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsxs)("button",{onClick:function(){return user&&setBuy(!0)},className:"px-6 py-2 mt-2 rounded-xl flex items-center gap-2 ".concat(!user&&"cursor-not-allowed"),style:{background:"linear-gradient(to bottom,  ".concat(colors[0]," 0%,").concat(colors[1]," 100%)")},children:[t("buy"),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(react_icons_fa__WEBPACK_IMPORTED_MODULE_13__.ZXh,{})]}):(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)("button",{onClick:handleTakeBack,className:"px-3 py-2 mt-2 rounded-xl flex items-center gap-2 ".concat(!user&&"cursor-not-allowed"),style:{backgroundColor:"orange"},children:t("takeBack")})]}),buy&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(_Modals_FTBuy__WEBPACK_IMPORTED_MODULE_8__.V,{token:ft.pricenai.token,handleClose:function(){return setBuy(!1)},ft:ft})]})}},13449:function(_,e,t){"use strict";t.d(e,{V:function(){return O}});var r=t(83789),a=t(30266),n=t(80318),s=t(809),o=t.n(s),c=t(67294),i=t(2804),u=t(63569),l=t(43196),d=t(86733),E=t(94649),m=t(37039),p=t(99176),D=t(45051),f=t(9669),x=t.n(f),P=t(88943),M=t(85893),O=function(_){var e=_.ft,t=_.handleClose,s=_.token,f=(0,c.useState)(),O=f[0],h=f[1],b=(0,i.FV)(u.D2),C=(0,n.Z)(b,2),k=(C[0],C[1]),U=(0,c.useState)(s),T=U[0],g=U[1],B=(0,c.useState)(1),I=B[0],y=B[1],W=(0,c.useState)(1),R=W[0],L=W[1],A=(0,i.sJ)(u.KL),v=(0,i.sJ)(u.uo),K=(0,i.sJ)(u.H3),j=(0,i.sJ)(u.db),w=(0,m.$G)().t,S=function(){var _=(0,a.Z)(o().mark((function _(){var t,a;return o().wrap((function(_){for(;;)switch(_.prev=_.next){case 0:if("DLUX"!==T){_.next=7;break}return _.next=3,(0,l.ev)(A.name,O,v);case 3:(t=_.sent)&&t.success&&k((function(_){return[].concat((0,r.Z)(_),[t])})),_.next=11;break;case 7:return _.next=9,(0,l.Yr)({amount:"".concat(O.price," ").concat(T),memo:"NFT "+e.set+":"+e.uid},A.name,j);case 9:(a=_.sent)&&a.success&&k((function(_){return[].concat((0,r.Z)(_),[a])}));case 11:case"end":return _.stop()}}),_)})));return function(){return _.apply(this,arguments)}}(),q=function(_){return parseFloat(parseFloat((+e.pricenai.amount/Math.pow(10,e.pricenai.precision)).toString()).toFixed(e.pricenai.precision))*_*N(T)},N=function(_){return _===s?1:"HIVE"===_?"HBD"===s?I/R:I:"HBD"===_?"HIVE"===s?R/I:R:1/("HIVE"===s?I:R)};return(0,c.useEffect)((function(){O&&S()}),[O]),(0,c.useEffect)((function(){x().get("".concat(K,"dex")).then((function(_){var e=_.data;y(e.markets.hive.tick),L(e.markets.hbd.tick)}))}),[]),(0,M.jsxs)(P.A,{handleClose:t,children:[(0,M.jsx)("h1",{className:"text-xl text-center whitespace-nowrap mb-2",children:"How many?"}),(0,M.jsxs)("h1",{className:"text-xl text-center whitespace-nowrap",children:[w("availible"),": ",e.qty]}),(0,M.jsx)(E.J9,{initialValues:{qty:1},validate:function(_){var t=_.qty,r={};return e.qty&&e.qty<t&&(r.qty="Not enough availible"),r},onSubmit:function(_,r){var a=_.qty,n=r.setSubmitting;h({price:q(a),set:e.set,uid:e.uid?e.uid:void 0,currency:T,qty:a}),n(!1),t()},children:function(_){var e=_.values,t=_.errors,r=_.touched,a=_.handleChange,n=_.handleBlur,s=_.handleSubmit;return(0,M.jsx)("form",{onSubmit:s,children:(0,M.jsxs)("div",{className:"flex flex-col justify-center gap-5 text-white",children:[(0,M.jsx)(d.y,{errors:t.qty,handleBlur:n,handleChange:a,name:"qty",type:"number",touched:r.qty,value:e.qty,min:1}),(0,M.jsxs)("div",{children:[(0,M.jsx)("h1",{className:"mb-1",children:"Currency"}),(0,M.jsx)(p.ZP,{styles:D.XR,defaultValue:D.xy[0],onChange:function(_){g(_.value)},options:D.xy})]}),(0,M.jsxs)("button",{type:"submit",className:"rounded-lg border border-white py-1 w-2/3 px-2 bg-gray-500 focus:ring-4 mx-auto focus:outline-none focus:ring-gray-700",children:[q(e.qty).toFixed(2)," ",T]})]})})}})]})}},36423:function(_,e,t){"use strict";t.r(e);var r=t(30266),a=t(809),n=t.n(a),s=t(67294),o=t(11163),c=t(15891),i=t(54190),u=t(9669),l=t.n(u),d=t(2804),E=t(63569),m=t(37039),p=t(85893);e.default=function(){var _=(0,s.useState)(!0),e=_[0],t=_[1],a=(0,s.useState)([]),u=a[0],D=a[1],f=(0,s.useState)([]),x=f[0],P=f[1],M=(0,o.useRouter)(),O=(0,d.sJ)(E.H3),h=(0,m.$G)().t;return u===[]&&M.push("/"),(0,s.useEffect)((function(){(function(){var _=(0,r.Z)(n().mark((function _(){return n().wrap((function(_){for(;;)switch(_.prev=_.next){case 0:l().get("".concat(O,"api/sales")).then((function(_){var e=_.data.result;D(e)})),l().get("".concat(O,"api/mintsupply")).then((function(_){var e=_.data.result;P(e)}));case 2:case"end":return _.stop()}}),_)})));return function(){return _.apply(this,arguments)}})()()}),[]),(0,p.jsxs)("div",{className:"mx-10 my-4 text-white font-medium",children:[(0,p.jsx)("title",{children:"Listings"}),(0,p.jsxs)("div",{className:"flex justify-center",children:[(0,p.jsx)("button",{onClick:function(){return t(!0)},className:"p-2 ".concat(e&&"bg-gray-800"," rounded-l-full bg-gray-700 text-white transition-all"),children:"NFTs"}),(0,p.jsx)("button",{onClick:function(){return t(!1)},className:"p-2 ".concat(!e&&"bg-gray-800"," rounded-r-full bg-gray-700 text-white transition-all"),children:"FTs"})]}),(0,p.jsx)("h1",{className:"text-white mt-10 mb-5 text-3xl font-semibold",children:h("listings")}),e?u&&(0,p.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 xl:grid-cols-4 my-2 gap-5",children:u.map((function(_){return(0,p.jsx)(c.yC,{nft:_},_.uid)}))}):x&&(0,p.jsx)("div",{children:x.map((function(_){return(0,p.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 xl:grid-cols-4 my-2 gap-5",children:_.sales.map((function(_){return(0,p.jsx)(i.S,{ft:_},_.uid)}))})}))})]})}},35352:function(_,e,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/listings",function(){return t(36423)}])}},function(_){_.O(0,[774,888,179],(function(){return e=35352,_(_.s=e);var e}));var e=_.O();_N_E=e}]);